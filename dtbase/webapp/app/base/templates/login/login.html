{% extends "base_site.html" %}

{% block title %} Login {% endblock title %}

{% block stylesheets %}
  {{ super() }}
  <link href="{{ url_for('static', filename='css/login.css') }}" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">
{% endblock stylesheets %}

{% block body_class %}login{% endblock body_class %}

{% block body %}
  <!-- Parsley -->
  <script src="{{ url_for('static', filename='node_modules/parsleyjs/dist/parsley.min.js') }}"></script>
  <div>
    <div class="login_wrapper">
      <div class="form login_form">
        <section class="login_content">
          <form data-parsley-validate method="post">
            {{ login_form.hidden_tag() }}
            <h1>Login</h1>
            {% for field in login_form if field.widget.input_type != 'hidden'  %}
              <div>
                  {{ field(class="form-control required", size=20, placeholder=field.label.text) }}
                  {% if field.name == "password" %}
                    <i class="fa-solid fa-eye" id="show-password" onclick="passwordToggle()"></i>
                  {% endif %}
              </div>
            {% endfor %}
            <div>
                <button type="submit" class="btn btn-default submit" name="login">Log in</button>
            </div>
          </form>
        </section>
      </div>
    </div>
  </div>

  <script>
    function passwordToggle() {
      var passwordField = document.getElementById("pwd_login");
      var passwordFieldType = passwordField.getAttribute("type");
      if (passwordFieldType === "password") {
        passwordField.setAttribute("type", "text");
      } else {
        passwordField.setAttribute("type", "password");
      }
    }
  </script>
{% endblock body %}
